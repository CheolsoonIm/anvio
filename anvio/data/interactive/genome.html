<html>
    <head>
        <title>Genome Display</title>
        <script type="text/javascript" src="js/tree.js"></script>
        <script type="text/javascript" src="js/utils.js"></script>
        <script type="text/javascript" src="lib/jquery/dist/jquery.min.js"></script>
        <style>
            * { 
                margin: 0; 
                padding: 0;
            }

            body, html { 
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
            
            #canvas {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                overflow: auto;
            }
        </style>
    </head>

    <body>
        <!-- <svg>
            <g id="viewport">

            </g>
        </svg> -->

        <canvas id="canvas"></canvas>
        <script type="text/javascript" src="js/genome.js"></script>
        <script type="text/javascript">
            const genomeViewer = new GenomeViewer({
                'canvas': document.getElementById('canvas'),
            });


            fetch('/data/get_neighbors').then((response) => {
                response.json().then((data) => {
                    data.forEach((gene) => {
                        let genome_name = gene['genome_name'];

                        let track = genomeViewer.getTrack(genome_name);
                        track.contigs[0].genes.push(
                                new Gene({
                                  'viewer': genomeViewer,
                                  'gene_callers_id': gene['gene_callers_id'], 
                                  'start': gene['start'],
                                  'stop': gene['stop'],
                                  'direction': gene['direction']}));
                    }); 
                    genomeViewer.handleResize();
                    genomeViewer.center();
                });
            });

        </script>
    </body>
</html>
